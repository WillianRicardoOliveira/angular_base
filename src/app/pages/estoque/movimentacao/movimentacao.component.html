<app-cabecalho-pagina [pagina]="pagina"></app-cabecalho-pagina>

<app-grid *ngIf="isLista"    
    [b_excluir]="false"
    [b_editar]="false"
    [totalRegistros]="totalRegistros"
    [lista]="lista"
    [coluna]="coluna"
    (pesquisa)="pesquisar($event)"
    (adicionar)="botaoAdicionar()"
    (editar)="botaoEditar($event)"
    (excluir)="botaoExcluir($event)"
    (visualizar)="botaoVisualizar($event)"
    (p_paginacao)="quantidadePorPagina($event)">,
</app-grid>

<mat-card class="card formulario" *ngIf="isFormulario && formulario">
    <mat-card-header class="card-header">
      <mat-card-title class="card-title">
        <h2>Cadastro de movimentação</h2>
      </mat-card-title>    
      <mat-card-actions class="card-tools">  
        <button type="button" class="btn btn-tool" title="Ajuda">
          <mat-icon>help</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card-header>
    <mat-card-content class="card-body">
      <form [formGroup]="formulario">
          <div class="grid-container">
              <app-select point="tipoMovimentacao"
              [control]="tipoMovimentacaoControl"
              (objeto)="tipoMovimentacaoChange()"></app-select>
              <div class="grid-item">
                <div class="valide" *ngIf="formulario.get('tipoMovimentacao')?.errors?.['required'] && formulario.get('tipoMovimentacao')?.touched">
                    Este campo é obrigatório
                </div> 
              </div>
              <app-dropdown 
              [control]="produtoControl"
              (objeto)="produtoChange()"
              class="full-width"
              label="Produto"
              point="produto"></app-dropdown>
            <div class="valide" *ngIf="formulario.get('produto')?.errors?.['required'] && formulario.get('produto')?.touched">
              Este campo é obrigatório
            </div>
            <mat-form-field appearance="outline">
              <mat-label>Quantidade</mat-label>
              <input type="text" matInput formControlName="quantidade" mask="0 || 00 || 000">
            </mat-form-field>
            <div class="valide" *ngIf="formulario.get('quantidade')?.errors?.['required'] && formulario.get('quantidade')?.touched">
              Este campo é obrigatório
            </div>
          </div>
      </form>
    </mat-card-content>
    <mat-card-actions class="card-footer">
      <button type="submit" mat-stroked-button color="primary" (click)="salvar()" [disabled]="!formulario.valid">
        Salvar
      </button>      
      <button type="submit" mat-stroked-button color="primary" (click)="cancelar()">
        Cancelar
      </button>
    </mat-card-actions>
  </mat-card>
  <mat-divider></mat-divider>